(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{403:function(t,e,n){"use strict";function r(t){return{url:"/api/v1/article/category",method:"get",data:t}}function o(t){return{url:"/api/v1/article/category",method:"post",data:t}}function c(t){return{url:"/api/v1/article/category",method:"put",data:t}}function l(t){return{url:"/api/v1/article/category/"+t,method:"delete"}}function d(t){return{url:"/api/v1/article/"+t,method:"get"}}function v(t){return{url:"/api/v1/article",method:"post",data:t}}function h(t){return{url:"/api/v1/article",method:"put",data:t}}function m(t){return{url:"/api/v1/article/page",method:"get",params:t}}function f(t){return{url:"/api/v1/article/down/"+t,method:"put"}}function x(t){return{url:"/api/v1/article/up/"+t,method:"put"}}function _(t){return{url:"/api/v1/article/label/page",method:"get",params:t}}function y(t){return{url:"/api/v1/article/label",method:"get"}}function w(t){return{url:"/api/v1/article/label",method:"post",data:t}}function k(t){return{url:"/api/v1/article/label/"+t,method:"delete"}}n.d(e,"i",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"n",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return d}),n.d(e,"l",function(){return v}),n.d(e,"m",function(){return h}),n.d(e,"h",function(){return m}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return x}),n.d(e,"g",function(){return _}),n.d(e,"f",function(){return y}),n.d(e,"a",function(){return w}),n.d(e,"c",function(){return k})},456:function(t,e,n){var content=n(521);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(5).default)("72fae56b",content,!0,{sourceMap:!1})},520:function(t,e,n){"use strict";var r=n(456);n.n(r).a},521:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".con[data-v-095750b0]{padding:0 20px}.layout>.flex[data-v-095750b0]{padding:8px}.v-icon[data-v-095750b0]{color:#2196f3;cursor:pointer}.img[data-v-095750b0],.v-image__image[data-v-095750b0]{width:30px;height:30px}.text-success[data-v-095750b0]{color:#228b22;font-weight:700}.text-info[data-v-095750b0]{color:#00d3ee;font-weight:700}.text-error[data-v-095750b0]{color:#dc6752;font-weight:700}.text-warning[data-v-095750b0]{color:#dca173;font-weight:700}.col[data-v-095750b0]{padding:0 12px!important}.pagination[data-v-095750b0]{margin:20px}.limit-width[data-v-095750b0]{width:100px;overflow:hidden;text-overflow:ellipsis;word-wrap:wrap}",""])},578:function(t,e,n){"use strict";n.r(e);n(216);var r=n(15),o=(n(18),n(23),n(46),n(13)),article=n(403),c={name:"User",layout:"admin",data:function(){return{searchData:{},selected:[],loading:!0,headers:[{text:"文章封面",value:"coverImage"},{text:"标题",value:"title"},{text:"副标题",value:"subheading"},{text:"状态",value:"status"},{text:"公开度",value:"openness"},{text:"标签",value:"label"},{text:"分类目录",value:"categoryName"},{text:"作者",value:"authorName"},{text:"创建时间",value:"createDate"},{text:"操作",value:""}],desserts:[],pagination:{descending:!0,page:1,rowsPerPage:10,sortBy:"",totalItems:2},row:{},dialogVisible:!1,formVisible:!1,categoryLoading:!1,title:"",category:[],startmenu:!1,endmenu:!1,color:["info","success","primary","warning","error","admin.vue"]}},computed:{length:{get:function(){return this.pagination.totalItems?Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage):0},set:function(){}}},asyncData:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){var n,r,o,c,l,i,d,v,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.app,e.query,r=e.error,t.next=3,n.$axios.$request(Object(article.i)());case 3:if(o=t.sent,c=[],"200"!==o.code){t.next=13;break}for((l={}).text="请选择分类目录",l.value="",c.push(l),i=0;i<o.data.length;i++)(d={}).text=o.data[i].name,d.value=o.data[i].id,c.push(d);t.next=14;break;case 13:return t.abrupt("return",r({statusCode:o.code,message:o.message}));case 14:return t.next=16,n.$axios.$request(Object(article.h)());case 16:if(v=t.sent,h={},"200"!==v.code){t.next=24;break}h.page=v.data.currentPage,h.rowsPerPage=v.data.pageSize,h.totalItems=v.data.total,t.next=25;break;case 24:return t.abrupt("return",r({statusCode:v.code,message:v.message}));case 25:return t.abrupt("return",{category:c,desserts:v.data.records,pagination:h});case 26:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),methods:{search:function(){var t=this;this.loading=!0;var e=this.searchData;e.pageSize=this.pagination.rowsPerPage,e.pageNumber=this.pagination.page,this.$axios.$request(Object(article.h)(e)).then(function(e){"200"===e.code?(t.desserts=e.data.records,t.pagination.totalItems=e.data.total):t.$swal({text:"拉取文章列表失败",type:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3})}).catch(function(e){t.categoryLoading=!1,t.$swal({text:e.message,type:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3})}).finally(function(){t.loading=!1})},toggleAll:function(){this.selected.length?this.selected=[]:this.selected=this.desserts.slice()},changeSort:function(t){this.pagination.sortBy===t?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=t,this.pagination.descending=!1)},handleAdd:function(){this.$router.push({path:"/article/add"})},handleEdit:function(t){this.formVisible=!0,this.$router.push({path:"/article/edit",query:{id:t.id}})},handleCancel:function(){this.formVisible=!1},handleInfo:function(t){this.row=Object(r.a)({},t),this.$swal({title:"操作成功!",text:"预览功能正在开发中，别急嘛",type:"success"})},handleDown:function(t){var e=this;this.$swal({title:"确定要下架吗？",text:"一旦下架，用户无法查看到当前文章作品",type:"warning",showCancelButton:!0}).then(function(n){n.value&&e.$axios.$request(Object(article.j)(t.id)).then(function(t){"200"===t.code&&t.data?(e.$swal({title:"操作成功!",text:"该文章作品已经被下架",type:"success"}),e.search("")):e.$swal({title:"操作失败!",text:t.message,type:"error"})})})},handleUp:function(t){var e=this;this.$swal({title:"确定要上架吗？",text:"将该资源从下架状态改成正常状态，用户可正常浏览该文章作品",type:"warning",showCancelButton:!0}).then(function(n){n.value&&Object(article.k)(t.id).then(function(t){"200"===t.code&&t.data?(e.$swal({title:"操作成功!",text:"该文章作品已经成功上架",type:"success"}),e.search("")):e.$swal({title:"操作失败!",text:t.message,type:"error"})})})}}},l=(n(520),n(11)),d=n(16),v=n.n(d),h=n(140),m=n(469),f=n(431),x=n(566),_=n(562),y=n(131),w=n(142),k=n(214),D=n(132),C=n(387),$=n(477),V=n(556),I=n(391),S=n(473),component=Object(l.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"con"},[n("v-layout",{attrs:{row:"",wrap:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}}},[n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("v-text-field",{attrs:{label:"Solo",placeholder:"文章标题",solo:""},model:{value:t.searchData.title,callback:function(e){t.$set(t.searchData,"title",e)},expression:"searchData.title"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("v-text-field",{attrs:{label:"Solo",placeholder:"标签关键字",solo:""},model:{value:t.searchData.label,callback:function(e){t.$set(t.searchData,"label",e)},expression:"searchData.label"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("v-text-field",{attrs:{label:"Solo",placeholder:"作者名称",solo:""},model:{value:t.searchData.authorName,callback:function(e){t.$set(t.searchData,"authorName",e)},expression:"searchData.authorName"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{label:"创建时间检索开始时间","prepend-icon":"event",readonly:"",solo:""},model:{value:t.searchData.startDate,callback:function(e){t.$set(t.searchData,"startDate",e)},expression:"searchData.startDate"}},r))]}}]),model:{value:t.startmenu,callback:function(e){t.startmenu=e},expression:"startmenu"}},[t._v(" "),n("v-date-picker",{on:{input:function(e){t.startmenu=!1}},model:{value:t.searchData.startDate,callback:function(e){t.$set(t.searchData,"startDate",e)},expression:"searchData.startDate"}})],1)],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{label:"创建时间检索结束时间","prepend-icon":"event",readonly:"",solo:""},model:{value:t.searchData.endDate,callback:function(e){t.$set(t.searchData,"endDate",e)},expression:"searchData.endDate"}},r))]}}]),model:{value:t.endmenu,callback:function(e){t.endmenu=e},expression:"endmenu"}},[t._v(" "),n("v-date-picker",{on:{input:function(e){t.endmenu=!1}},model:{value:t.searchData.endDate,callback:function(e){t.$set(t.searchData,"endDate",e)},expression:"searchData.endDate"}})],1)],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[n("v-select",{attrs:{solo:"",items:t.category,"item-text":"text","item-value":"value",label:"请选择分类目录",required:""},model:{value:t.searchData.categoryId,callback:function(e){t.$set(t.searchData,"categoryId",e)},expression:"searchData.categoryId"}})],1),t._v(" "),n("v-flex",{attrs:{xs6:"",sm2:"",md1:""}},[n("v-btn",{attrs:{color:"info"},on:{click:t.search}},[t._v("搜索 "),n("br"),t._v(" "),n("v-icon",{attrs:{small:""}},[t._v("search")])],1)],1),t._v(" "),n("v-flex",{attrs:{xs6:"",sm2:"",md1:""}},[n("v-btn",{attrs:{color:"success",title:"添加"},on:{click:t.handleAdd}},[t._v("\n        添加 "),n("br"),t._v(" "),n("v-icon",{attrs:{small:""}},[t._v("add")])],1)],1)],1),t._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,pagination:t.pagination,items:t.desserts,"total-items":t.pagination.totalItems,loading:t.loading,"hide-actions":"","select-all":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headers",fn:function(e){return[n("tr",[n("th",[n("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":""},on:{click:function(e){return e.stopPropagation(),t.toggleAll(e)}}})],1),t._v(" "),t._l(e.headers,function(header){return n("th",{key:header.text,class:["column sortable",t.pagination.descending?"desc":"asc",header.value===t.pagination.sortBy?"active":"",header.class],on:{click:function(e){return t.changeSort(header.value)}}},[n("v-icon",{attrs:{small:""}},[t._v("arrow_upward")]),t._v("\n          "+t._s(header.text)+"\n        ")],1)})],2)]}},{key:"no-data",fn:function(){return[n("p",{staticClass:"text-md-center teal--text"},[n("v-icon",[t._v("sentiment_satisfied_alt")]),t._v("\n        已经找遍了，再怎么找也找不到啦！\n      ")],1)]},proxy:!0},{key:"items",fn:function(e){return[n("tr",{attrs:{active:e.selected}},[n("td",{staticClass:"text-xs-right",on:{click:function(t){e.selected=!e.selected}}},[n("v-checkbox",{attrs:{"input-value":e.selected,primary:"","hide-details":""}})],1),t._v(" "),n("td",{staticClass:"text-xs-right"},[n("v-img",{attrs:{height:"32px",width:"32px","aspect-ratio":"1.0","lazy-src":e.item.coverImage,src:e.item.coverImage,alt:"avatar"}})],1),t._v(" "),n("td",{staticClass:"text-xs-right text-truncate"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on;return[n("div",t._g({staticClass:"limit-width"},o),[t._v(t._s(e.item.title))])]}}],null,!0)},[t._v("\n            "+t._s(e.item.title)+"\n          ")])],1),t._v(" "),n("td",{staticClass:"text-xs-right text-truncate"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on;return[n("div",t._g({staticClass:"limit-width"},o),[t._v("\n                "+t._s(e.item.subheading)+"\n              ")])]}}],null,!0)},[t._v("\n            "+t._s(e.item.subheading)+"\n          ")])],1),t._v(" "),n("td",{staticClass:"text-xs-right col"},["FORMAL"==e.item.status?n("span",{staticClass:"text-success"},[t._v("\n            发布 "),n("v-icon",{attrs:{color:"success",small:""}},[t._v("important_devices")])],1):t._e(),t._v(" "),"DRAFT"==e.item.status?n("span",{staticClass:"text-warning"},[t._v("\n            草稿 "),n("v-icon",{attrs:{color:"warning",small:""}},[t._v("speaker_notes")])],1):t._e(),t._v(" "),"DOWN"==e.item.status?n("span",{staticClass:"text-error"},[t._v("\n            下架"),n("v-icon",{attrs:{color:"error",small:""}},[t._v("trending_down")])],1):t._e()]),t._v(" "),n("td",{staticClass:"text-xs-right col"},["ALL"==e.item.openness?n("span",{staticClass:"text-success"},[t._v("\n            所有人 "),n("v-icon",{attrs:{color:"success",small:""}},[t._v("visibility")])],1):t._e(),t._v(" "),"SELFONLY"==e.item.openness?n("span",{staticClass:"text-info"},[t._v("\n            仅自己 "),n("v-icon",{attrs:{color:"info",small:""}},[t._v("visibility_off")])],1):t._e()]),t._v(" "),n("td",{staticClass:"text-xs-right col"},[n("div",{staticClass:"limit-width"},t._l(e.item.label.split(","),function(label){return n("v-chip",{key:label,attrs:{color:t.color[parseInt(6*label.length/6)],small:""}},[t._v("\n              "+t._s(label)+"\n            ")])}),1)]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.categoryName))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.authorName))]),t._v(" "),n("td",{staticClass:"text-xs-right col"},[t._v(t._s(e.item.createDate))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[n("v-layout",{staticClass:"mb-2",attrs:{"justify-center":""}},[n("v-btn",{attrs:{icon:"",flat:"",color:"primary",title:"预览"},on:{click:function(n){return t.handleInfo(e.item)}}},[n("v-icon",[t._v("portrait")])],1),t._v(" "),n("v-btn",{attrs:{icon:"",flat:"",color:"primary",title:"编辑"},on:{click:function(n){return t.handleEdit(e.item)}}},[n("v-icon",[t._v("create")])],1),t._v(" "),n("v-btn",{attrs:{icon:"",flat:"",color:"primary",title:"上架"},on:{click:function(n){return t.handleUp(e.item)}}},[n("v-icon",[t._v("trending_up")])],1),t._v(" "),n("v-btn",{attrs:{icon:"",flat:"",color:"primary",title:"下架"},on:{click:function(n){return t.handleDown(e.item)}}},[n("v-icon",[t._v("trending_down")])],1)],1)],1)])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),t._v(" "),n("div",{staticClass:"pagination text-md-right"},[n("v-pagination",{attrs:{circle:"",color:"primary",length:t.length},on:{input:t.search},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)},[],!1,null,"095750b0",null);e.default=component.exports;v()(component,{VBtn:h.a,VCheckbox:m.a,VChip:f.a,VDataTable:x.a,VDatePicker:_.a,VFlex:y.a,VIcon:w.a,VImg:k.a,VLayout:D.a,VMenu:C.a,VPagination:$.a,VSelect:V.a,VTextField:I.a,VTooltip:S.a})}}]);